<div class="pt-2 mt-1 hideScroll ">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h2 class="font-semibold font-mono text-lg text-orange-700">{{tcId}} - <span
          class="font-normal text-black text-sm">{{description}}</span></h2>
    </div>

    <div class="relative">
      <button mat-stroked-button [matMenuTriggerFor]="categoryMenu"
        class="h-8 text-xs font-semibold text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 px-3 py-1 rounded flex items-center shadow-sm transition-all duration-200">
        <mat-icon class="mr-1 text-sm text-blue-600">category</mat-icon>
        <span class="mr-1 text-gray-600">Category:</span>
        <span class="font-medium text-blue-700">{{currentCategory}}</span>
        <mat-icon class="ml-1 text-sm">arrow_drop_down</mat-icon>
      </button>

      <mat-menu #categoryMenu="matMenu" class="category-menu">
        <div class="py-2 px-3 bg-blue-50 border-b border-gray-200">
          <div class="flex items-center">
            <mat-icon class="text-green-600 mr-2">check_circle</mat-icon>
            <span class="text-sm font-medium text-gray-800">{{currentCategory}}</span>
          </div>
          <div class="text-xs text-gray-500 ml-7">Current Category</div>
        </div>

        <button mat-menu-item *ngFor="let category of filteredCategories" (click)="updateCategory(category)"
          class="text-sm hover:bg-gray-50">
          <mat-icon class="text-gray-400">panorama_fish_eye</mat-icon>
          <span>{{category}}</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <button (click)="onRevertButtonClick()" class="text-xs font-semibold text-gray-500 mr-4"> <i
      class="fa-solid fa-rotate-left mr-1 "></i><span>Revert</span></button>
  <button (click)="onUpdateButtonClick()" class="text-xs font-semibold text-gray-500 mr-4"><i
      class="fa-solid fa-cloud-arrow-up mr-1"></i>Update</button>
  <button class="text-xs mainButton hover:bg-blue-700 hover:scale-110 text-white font-mono p-1 rounded-sm"
    (click)="onExecuteButtonClick()" [ngClass]="{'opacity-50 cursor-not-allowed':isExecuting}">Execute</button>

  <img *ngIf="isExecuting" src="assets/svg_loader.svg" width="20" height="20" fill="bg-blue-500"
    class="animate-spin inline-block ml-2" />
  <div class="grid md:grid-cols-3 sm:grid-cols-2 p-2  gap-5 mt-4  ">
    <div *ngFor="let row of editedData;let i=index"
      class="flex flex-col gap-1  text-sm eventGrid cursor-pointer relative  bg-white">
      <div class="eventIcons p-1 rounded-md ">
        <button *ngIf="eventScreenshots!=undefined" class="focus:outline-none">
          <i class="fa-solid fa-expand mr-2" (click)="openImageDialog(eventScreenshots[i], row)"
            (keyup.enter)="openImageDialog(eventScreenshots[i], row)"></i>
        </button>
        <button class="focus:outline-none"><i class="fa-solid fa-pen cursor-pointer text-xs"
            (click)="openFormDialog({eventsData:row,index:i})"></i></button>

      </div>
      <div class="flex items-center absolute left-0 top-2" *ngIf="row.autohealed || row.assertion !== null">
        <p class="bg-blue-800 text-white font-medium p-[2px] text-xs" *ngIf="row.autohealed">
          Autohealed
        </p>

        <div class="tooltip" *ngIf="row.assertionStatus === true">
          <mat-icon style="color: #048c04; font-size: 25px;">flag</mat-icon>
          <span class="tooltiptext">Assertion Passed</span>
        </div>

        <div class="tooltip" *ngIf="row.assertionStatus === false">
          <mat-icon style="color: #e53e3e; font-size: 25px;">flag</mat-icon>
          <span class="tooltiptext">Assertion Failed</span>
        </div>
      </div>
      <img *ngIf="eventScreenshots!=undefined" [src]="backendUrl + '/tokens' + eventScreenshots[i]" alt="Image"
        class="w-full object-cover object-top eventImage" />
      <div class="p-2">
        <div *ngIf="row.action!=null">
          <p class="capitalize overflow-hidden "> <span>Action</span> {{row.action}}</p>
        </div>
        <div *ngIf="row.type!=null">
          <p class="capitalize overflow-hidden mb-1"> <span class=" ">Type</span>{{row.type}}</p>
          <p class="capitalize overflow-hidden"> <span class=" ">Value</span>{{row.value}}</p>
        </div>

        <p class="overflow-hidden  whitespace-nowrap"><span>xpath</span>{{ row["relativeXPath"] || "-"}}
        </p>
      </div>
    </div>
  </div>
  <!-- <app-edit-dialog-box #DialogBoxComponent (dialogBoxEmitter)="saveEditedData($event)"></app-edit-dialog-box> -->

</div>
<div class="bg-zinc-300 p-1 mt-5 inline-block" *ngIf="eventScreenshots==undefined">
  <small>
    <span class="font-semibold text-red-900 ">Note - </span>
    Images are not displayed as test case is not executed atleast once.
  </small>
</div>