<div class="flex justify-between mt-2">
  <button class="mt-2 text-sm mainButton hover:bg-blue-700 hover:scale-100 text-white  rounded-sm p-2"
    (click)="executeTestCases()" [ngClass]="{'opacity-50 cursor-not-allowed':isExecuting}">
    Execute All
    <img *ngIf="isExecuting" src="assets/svg_loader.svg" width="20" height="20" fill="bg-blue-500"
      class="animate-spin inline-block ml-2" />
  </button>

  <div class="mt-2 w-60 ">
    <button mat-stroked-button [matMenuTriggerFor]="categoryMenu"
      class="h-8 text-xs font-semibold text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 px-3 py-1 rounded flex items-center shadow-sm transition-all duration-200">
      <mat-icon class="mr-1 text-sm text-blue-600">category</mat-icon>
      <span class="mr-1 text-gray-600">Category:</span>
      <span class="font-medium text-blue-700">{{currentCategory}}</span>
      <mat-icon class="ml-1 text-sm">arrow_drop_down</mat-icon>
    </button>

    <mat-menu #categoryMenu="matMenu" class="category-menu">
      <div class="py-2 px-3 bg-blue-50 border-b border-gray-200">
        <div class="flex items-center">
          <mat-icon class="text-green-600 mr-2">check_circle</mat-icon>
          <span class="text-sm font-medium text-gray-800">{{currentCategory}}</span>
        </div>
        <div class="text-xs text-gray-500 ml-7">Current Category</div>
      </div>

      <button mat-menu-item *ngFor="let category of filteredCategories" (click)="selectCategory(category)"
        class="text-sm hover:bg-gray-50">
        <mat-icon class="text-gray-400">label</mat-icon>
        <span>{{category}}</span>
      </button>
    </mat-menu>
  </div>
</div>
<ng-container *ngIf="currentCategory === 'All'">
  <div *ngFor="let category of displayCategories" class="mt-6">
    <div class="category-header mb-3">
      <!-- <div class="flex items-center"> -->
      <!-- <mat-icon class="text-blue-600 mr-2 mb-2">category</mat-icon> -->
      <h4 class="text-medium font-semibold border-solid border-gray-300 border-b-[2px] pb-1  text-gray-800">{{ category
        }}
        Test Cases</h4>
      <!-- </div> -->
      <!-- <div class="category-line"></div> -->
    </div>

    <div class="flex gap-7 flex-wrap">
      <div *ngFor="let record of groupedRecordingData[category]" (click)="onCardClick(record)"
        class="relative w-[300px] h-[100px] shadow-md hover:border-blue-800 border-solid border-l-[2px] rounded-r-lg p-2 bg-gray-100 cursor-pointer">
        <div>
          <input #checkbox type="checkbox" class="inline-block" [value]="record['test_case_id']"
            (click)="onCheckBoxClick($event,record['test_case_id'])" />
          <p class="inline-block ml-2"><span class="font-semibold font-mono text-blue-800">Test Case ID -</span>
            {{record["tcId"]}}</p>
          <button class="text-xs absolute right-2 top-2" (click)="onDeleteClick($event,record['test_case_id'])">
            <img src="assets/deleteIcon.svg" width="20" height="20" />
          </button>
          <p class="font-sans text-sm mt-2">{{record["description"]}}</p>
          <p class="font-sans text-sm mt-2">category : {{record["category"]}}</p>
        </div>
      </div>
    </div>
  </div>
</ng-container>
<ng-container *ngIf="currentCategory !== 'All'">
  <div class="mt-6">
    <div class="category-header mb-3">
      <div class="flex items-center">
        <mat-icon class="text-blue-600 mr-2 mb-2">category</mat-icon>
        <h4 class="text-medium text-gray-800">{{ currentCategory }} Test Cases</h4>
      </div>
      <div class="category-line"></div>
    </div>
    <div class="flex gap-7 flex-wrap">
      <div *ngFor="let record of recordingData" (click)="onCardClick(record)"
        class="relative w-[300px] h-[100px] shadow-md hover:border-blue-800 border-solid border-l-[2px] rounded-r-lg p-2 bg-gray-100 cursor-pointer">
        <div>
          <input #checkbox type="checkbox" class="inline-block" [value]="record['test_case_id']"
            (click)="onCheckBoxClick($event, record['test_case_id'])" />
          <p class="inline-block ml-2">
            <span class="font-semibold font-mono text-blue-800">Test Case ID -</span>
            {{ record["tcId"] }}
          </p>
          <button class="text-xs absolute right-2 top-2" (click)="onDeleteClick($event, record['test_case_id'])">
            <img src="assets/deleteIcon.svg" width="20" height="20" />
          </button>
          <p class="font-sans text-sm mt-2">{{ record["description"] }}</p>
          <p class="font-sans text-sm mt-2">category : {{ record["category"] }}</p>
        </div>
      </div>
    </div>
  </div>
</ng-container>